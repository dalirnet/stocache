!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("stocache",[],t):"object"==typeof exports?exports.stocache=t():e.stocache=t()}("undefined"!=typeof self?self:this,(function(){return function(){"use strict";var e={579:function(e,t){var n="stocache",o=3600,r=!1,u="localStorage",i=function(e){try{return window[u].setItem(e,JSON.stringify(!0)),JSON.parse(window[u].getItem(e))}catch(e){return!1}}(n+"-support");t.default=function(e,t,s){void 0===e&&(e=n),void 0===t&&(t=u),void 0===s&&(s=r);var c=function(e){return{key:function(t){void 0===t&&(t=e);for(var n=null===t?e:t,o=0,r=0;r<n.length;r++)o=(o<<5)-o+n.charCodeAt(r),o&=o;return e+"-"+(o>0?o:"i"+Math.abs(o))},exception:function(t,n){return void 0===t&&(t=null),void 0===n&&(n=null),{scope:e,name:t,message:n}}}},a=function(t){return{encode:function(n){void 0===n&&(n="");try{return JSON.stringify(t)}catch(t){var o=t.message;if(s)throw c(e).exception("json.encode",o);return n}},decode:function(n){void 0===n&&(n={});try{return JSON.parse(t)}catch(t){var o=t.message;if(s)throw c(e).exception("json.decode",o);return n}}}},f=function(n){return void 0===n&&(n=e),{set:function(o){void 0===o&&(o=null);try{return window[t].setItem(n,a(o).encode()),!0}catch(t){var r=t.message;if(s)throw c(e).exception("storage.set",r);return!1}},unset:function(){try{return window[t].removeItem(n),!0}catch(t){var o=t.message;if(s)throw c(e).exception("storage.unset",o);return!1}},get:function(e){return void 0===e&&(e=!1),a(window[t].getItem(n)).decode(e)}}},d=function(t,n){void 0===t&&(t=e),void 0===n&&(n=Math.floor(Date.now()/1e3));var o={shadow:c(e).key(),storage:c(e).key(t)},r=f(o.shadow).get()||{},u=function(e){return!!i&&(delete r[e],f(e).unset())},a=function(e){for(var t=void 0===e?{}:e,s=t.flush,c=void 0!==s&&s,a=t.expireSoon,d=void 0!==a&&a,l=!1,v=null,p=0,h=0,g=Object.keys(r);h<g.length;h++){var w=g[h];c||r[w]<n?(l=!0,u(w)):d&&(0===p||closestItem.value>r[w])&&(l=!0,v=w,p=r[w])}return!l||u(v)&&!!i&&f(o.shadow).set(r)},d=function(e,t){return void 0===t&&(t=l(o.storage)),!(!i||!t)&&(r[o.storage]=n+parseInt(e),f(o.shadow).set(r))},l=function(e){return a()&&r[e]&&r[e]>=n};return{set:function(n,r){if(i){if(e!==t){var u=f(o.storage).set(n);return u||(a(),u=f(o.storage).set(n)),u||(a({expireSoon:!0}),u=f(o.storage).set(n)),u||(a({flush:!0}),u=f(o.storage).set(n)),!!u&&d(r,!0)}if(s)throw c(e).exception("middleware.set","KeyConflict")}return!1},unset:u,has:l,keep:d,get:function(e){return i&&l(o.storage)?f(o.storage).get(e):e}}};return{support:i,set:function(e,t,n){return void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=o),d(e).set(t,n)},unset:function(e){return void 0===e&&(e=null),d(e).unset()},has:function(e){return void 0===e&&(e=null),d(e).has()},keep:function(e,t){return void 0===e&&(e=null),void 0===t&&(t=o),d(e).keep(t)},get:function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),d(e).get(t)},flush:function(e){return void 0===e&&(e=n),d(e).clean({flush:!0})}}}}},t={};return function n(o){if(t[o])return t[o].exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}(579)}().default}));
//# sourceMappingURL=index.js.map