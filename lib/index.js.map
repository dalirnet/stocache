{"version":3,"sources":["webpack://stocache/webpack/universalModuleDefinition","webpack://stocache/./src/index.js","webpack://stocache/webpack/bootstrap","webpack://stocache/webpack/runtime/make namespace object","webpack://stocache/webpack/startup"],"names":["config","scope","ttl","exception","support","key","localStorage","setItem","JSON","stringify","parse","getItem","e","Stocache","generator","value","code","i","length","charCodeAt","Math","abs","name","message","json","encode","fallback","decode","storage","set","retry","unset","removeItem","get","middleware","now","floor","Date","keys","shadow","context","commit","clean","flush","unsetStatus","Object","keep","condition","has","parseInt","keyGenerator","cleanExpired"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"stocache\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"stocache\"] = factory();\n\telse\n\t\troot[\"stocache\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn ","const config = {\r\n    scope: 'stocache',\r\n    ttl: 3600,\r\n    exception: false,\r\n}\r\n\r\nconst support = ((key) => {\r\n    try {\r\n        localStorage.setItem(key, JSON.stringify(true))\r\n        return JSON.parse(localStorage.getItem(key))\r\n    } catch (e) {\r\n        return false\r\n    }\r\n})(config.scope + '-' + 'support')\r\n\r\nconst Stocache = (scope = config.scope, exception = config.exception) => {\r\n    const generator = (scope) => ({\r\n        key: (value = scope) => {\r\n            let code = 0\r\n            for (let i = 0; i < value.length; i++) {\r\n                code = (code << 5) - code + value.charCodeAt(i)\r\n                code = code & code\r\n            }\r\n            return scope + '-' + (code > 0 ? code : 'i' + Math.abs(code))\r\n        },\r\n        exception: (name = null, message = null) => ({\r\n            scope,\r\n            name,\r\n            message,\r\n        }),\r\n    })\r\n\r\n    const json = (value) => ({\r\n        encode: (fallback = '') => {\r\n            try {\r\n                return JSON.stringify(value)\r\n            } catch ({ message }) {\r\n                if (exception) throw generator(scope).exception('json.encode', message)\r\n                return fallback\r\n            }\r\n        },\r\n        decode: (fallback = {}) => {\r\n            try {\r\n                return JSON.parse(value)\r\n            } catch ({ message }) {\r\n                if (exception) throw generator(scope).exception('json.decode', message)\r\n                return fallback\r\n            }\r\n        },\r\n    })\r\n\r\n    const storage = (key = scope) => ({\r\n        set: (value = null, retry = false) => {\r\n            try {\r\n                localStorage.setItem(key, json(value).encode())\r\n                return true\r\n            } catch ({ message }) {\r\n                if (exception) throw generator(scope).exception('storage.set', message)\r\n                return false\r\n            }\r\n        },\r\n        unset: () => {\r\n            try {\r\n                localStorage.removeItem(key)\r\n                return true\r\n            } catch ({ message }) {\r\n                if (exception) throw generator(scope).exception('storage.unset', message)\r\n                return false\r\n            }\r\n        },\r\n        get: (fallback = false) => {\r\n            return json(localStorage.getItem(key)).decode(fallback)\r\n        },\r\n    })\r\n\r\n    const middleware = (key = scope, now = Math.floor(Date.now() / 1000)) => {\r\n        let keys = {\r\n            shadow: generator(scope).key(),\r\n            storage: generator(scope).key(key),\r\n        }\r\n        let context = storage(keys.shadow).get() || {}\r\n\r\n        const commit = () => {\r\n            if (support) {\r\n                return storage(keys.shadow).set(context)\r\n            }\r\n            return false\r\n        }\r\n\r\n        const unset = (key) => {\r\n            if (support) {\r\n                delete context[key]\r\n                return storage(key).unset()\r\n            }\r\n            return false\r\n        }\r\n\r\n        const clean = (flush = false) => {\r\n            let unsetStatus = true\r\n            for (let key of Object.keys(context)) {\r\n                if (flush || context[key] < now) {\r\n                    unsetStatus = unset(key)\r\n                }\r\n            }\r\n            return unsetStatus && commit()\r\n        }\r\n\r\n        const set = (value, ttl) => {\r\n            if (support) {\r\n                if (scope !== key) {\r\n                    return storage(keys.storage).set(value, true) ? keep(ttl, true) : false\r\n                } else {\r\n                    if (exception) throw generator(scope).exception('middleware.set', 'KeyConflict')\r\n                }\r\n            }\r\n\r\n            return false\r\n        }\r\n\r\n        const keep = (ttl, condition = has(keys.storage)) => {\r\n            if (support && condition) {\r\n                context[keys.storage] = now + parseInt(ttl)\r\n                return storage(keys.shadow).set(context)\r\n            }\r\n            return false\r\n        }\r\n\r\n        const has = (key) => {\r\n            return clean() && support && context[key] && context[key] >= now\r\n        }\r\n\r\n        const get = (fallback) => {\r\n            if (support && has(keys.storage)) {\r\n                return storage(keys.storage).get(fallback)\r\n            }\r\n            return fallback\r\n        }\r\n\r\n        return { set, unset, has, keep, get }\r\n    }\r\n\r\n    return {\r\n        support,\r\n        keyGenerator: (key = config.scope) => generator(scope).key(key),\r\n        set: (key = null, value = null, ttl = config.ttl) => middleware(key).set(value, ttl),\r\n        unset: (key = null) => middleware(key).unset(),\r\n        has: (key = null) => middleware(key).has(),\r\n        keep: (key = null, ttl = config.ttl) => middleware(key).keep(ttl),\r\n        get: (key = null, fallback = false) => middleware(key).get(fallback),\r\n        flush: (scope = config.scope) => middleware(scope).clean(true),\r\n        cleanExpired: (scope = config.scope) => middleware(scope).clean(),\r\n    }\r\n}\r\n\r\nexport default Stocache\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(\"./src/index.js\");\n"],"sourceRoot":""}