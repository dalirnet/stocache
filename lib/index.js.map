{"version":3,"sources":["webpack://stocache/webpack/universalModuleDefinition","webpack://stocache/./src/index.js","webpack://stocache/webpack/bootstrap","webpack://stocache/webpack/runtime/make namespace object","webpack://stocache/webpack/startup"],"names":["PERFIX","support","key","localStorage","setItem","JSON","stringify","parse","getItem","e","json","value","encode","fallback","decode","generator","perfix","code","i","length","charCodeAt","Math","abs","stocache","storage","set","retry","message","get","shadow","now","floor","Date","keys","context","ttl","keep","condition","parseInt"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"stocache\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"stocache\"] = factory();\n\telse\n\t\troot[\"stocache\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn ","// perfix\r\nconst PERFIX = 'stocache'\r\n\r\n// support\r\nconst support = ((key) => {\r\n    try {\r\n        localStorage.setItem(key, JSON.stringify(true))\r\n        return JSON.parse(localStorage.getItem(key))\r\n    } catch (e) {\r\n        return false\r\n    }\r\n})(PERFIX + '-' + 'support')\r\n\r\n// json\r\nconst json = (value) => ({\r\n    encode: (fallback = '') => {\r\n        try {\r\n            return JSON.stringify(value)\r\n        } catch (e) {\r\n            return fallback\r\n        }\r\n    },\r\n    decode: (fallback = {}) => {\r\n        try {\r\n            return JSON.parse(value)\r\n        } catch (e) {\r\n            return fallback\r\n        }\r\n    },\r\n})\r\n\r\n// generator\r\nconst generator = (perfix = PERFIX) => ({\r\n    key: (value = perfix) => {\r\n        let code = 0\r\n        for (let i = 0; i < value.length; i++) {\r\n            code = (code << 5) - code + value.charCodeAt(i)\r\n            code = code & code\r\n        }\r\n        return perfix + '-' + (code > 0 ? code : 'i' + Math.abs(code))\r\n    },\r\n})\r\n\r\n// stocache\r\nconst stocache = (perfix = PERFIX) => {\r\n    const storage = (key = perfix) => {\r\n        const set = (value = null, retry = false) => {\r\n            try {\r\n                localStorage.setItem(key, json(value).encode())\r\n                return true\r\n            } catch ({ message }) {\r\n                return false\r\n            }\r\n        }\r\n\r\n        const get = (fallback = false) => {\r\n            return json(localStorage.getItem(key) || fallback).decode(fallback)\r\n        }\r\n\r\n        return { set, get }\r\n    }\r\n\r\n    const shadow = (key = perfix) => {\r\n        const now = Math.floor(Date.now() / 1000)\r\n\r\n        const keys = {\r\n            shadow: generator(perfix).key(),\r\n            storage: generator(perfix).key(key),\r\n        }\r\n\r\n        let context = storage(keys.shadow).get({})\r\n\r\n        const set = (value, ttl) => {\r\n            if (storage(keys.storage).set(value, true)) {\r\n                return keep(ttl, true)\r\n            }\r\n            return false\r\n        }\r\n\r\n        const keep = (ttl, condition = context[keys.storage]) => {\r\n            if (condition) {\r\n                context[keys.storage] = now + parseInt(ttl)\r\n                return storage(keys.shadow).set(context)\r\n            }\r\n            return false\r\n        }\r\n\r\n        const get = (fallback) => {\r\n            // console.log(map[keys.storage])\r\n            return storage(keys.storage).get(fallback)\r\n        }\r\n\r\n        return { set, keep, get }\r\n    }\r\n\r\n    return {\r\n        support,\r\n        set: (key, value = null, ttl = 300) => (support ? shadow(key).set(value, ttl) : false),\r\n        keep: (key, ttl = 300) => (support ? shadow(key).keep(ttl) : false),\r\n        get: (key, fallback = false) => (support ? shadow(key).get(fallback) : fallback),\r\n    }\r\n}\r\n\r\nexport default stocache\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(\"./src/index.js\");\n"],"sourceRoot":""}